apiVersion: v1
kind: ConfigMap
metadata:
  name: release-name-geth-swap-config
data:
  networkid: "12345"
  validatorKey: 4663c222787e30c1994b59044aa5045377a6e79193a8ead88293926b535c722d
  genesis.json: |-
    {
      "config": {
        "chainId": 12345,
        "homesteadBlock": 0,
        "eip150Block": 0,
        "eip150Hash": "0x0000000000000000000000000000000000000000000000000000000000000000",
        "eip155Block": 0,
        "eip158Block": 0,
        "byzantiumBlock": 0,
        "constantinopleBlock": 0,
        "petersburgBlock": 0,
        "istanbulBlock": 0,
        "berlinBlock": 0,
        "londonBlock": 0,
        "clique": {
          "period": 15,
          "epoch": 30000
        }
      },
      "nonce": "0x0",
      "timestamp": "0x5e4bc3a6",
      "extraData": "0x000000000000000000000000000000000000000000000000000000000000000062cab2b3b55f341f10348720ca18063cdb779ad50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
      "gasLimit": "0x47b760",
      "difficulty": "0x1",
      "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
      "coinbase": "0x0000000000000000000000000000000000000000",
      "alloc": {
        "0000000000000000000000000000000000000000": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000001": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000002": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000003": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000004": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000005": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000006": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000007": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000008": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000009": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000000f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000010": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000011": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000012": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000013": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000014": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000015": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000016": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000017": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000018": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000019": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000001f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000020": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000021": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000022": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000023": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000024": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000025": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000026": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000027": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000028": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000029": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000002f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000030": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000031": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000032": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000033": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000034": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000035": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000036": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000037": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000038": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000039": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000003f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000040": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000041": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000042": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000043": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000044": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000045": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000046": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000047": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000048": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000049": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000004f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000050": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000051": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000052": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000053": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000054": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000055": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000056": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000057": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000058": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000059": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000005f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000060": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000061": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000062": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000063": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000064": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000065": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000066": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000067": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000068": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000069": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000006f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000070": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000071": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000072": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000073": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000074": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000075": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000076": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000077": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000078": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000079": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000007f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000080": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000081": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000082": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000083": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000084": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000085": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000086": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000087": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000088": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000089": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000008f": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000090": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000091": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000092": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000093": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000094": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000095": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000096": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000097": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000098": {
          "balance": "0x1"
        },
        "0000000000000000000000000000000000000099": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009a": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009b": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009c": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009d": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009e": {
          "balance": "0x1"
        },
        "000000000000000000000000000000000000009f": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000a9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000aa": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ab": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ac": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ad": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ae": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000af": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000b9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ba": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000bb": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000bc": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000bd": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000be": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000bf": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000c9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ca": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000cb": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000cc": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000cd": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ce": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000cf": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000d9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000da": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000db": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000dc": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000dd": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000de": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000df": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000e9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ea": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000eb": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ec": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ed": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ee": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ef": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f0": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f1": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f2": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f3": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f4": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f5": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f6": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f7": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f8": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000f9": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000fa": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000fb": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000fc": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000fd": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000fe": {
          "balance": "0x1"
        },
        "00000000000000000000000000000000000000ff": {
          "balance": "0x1"
        },
        "62cab2b3b55f341f10348720ca18063cdb779ad5": {
          "balance": "0xf0000000000000000000000000"
        }
      },
      "number": "0x0",
      "gasUsed": "0x0",
      "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
    }
---
apiVersion: v1
kind: Service
metadata:
  name: release-name-geth-swap
  labels:
    helm.sh/chart: geth-swap-0.3.5
    app.kubernetes.io/name: geth-swap
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 8545
      targetPort: rpc
      protocol: TCP
      name: rpc
    - port: 8546
      targetPort: ws
      protocol: TCP
      name: ws
  selector:
    app.kubernetes.io/name: geth-swap
    app.kubernetes.io/instance: release-name
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: release-name-geth-swap
  namespace: zANMc1YJUPSRPGR
  labels:
    helm.sh/chart: geth-swap-0.3.5
    app.kubernetes.io/name: geth-swap
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/managed-by: Helm
spec:
  serviceName: release-name-geth-swap-headless
  podManagementPolicy: null
  replicas: 1
  updateStrategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geth-swap
      app.kubernetes.io/instance: release-name
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geth-swap
        app.kubernetes.io/instance: release-name
    spec:
      serviceAccountName: default
      securityContext: {}
      initContainers:
        - name: geth-setup
          image: ethereum/client-go:latest
          imagePullPolicy: IfNotPresent
          command:
            - sh
            - -ac
            - |
              set -xe; geth account import --password /dev/null /etc/config/validatorKey || true; geth init /etc/config/genesis.json || true;
          volumeMounts:
            - name: geth-config
              mountPath: /etc/config
            - name: data
              mountPath: /root/.ethereum
      containers:
        - name: geth-swap
          image: ethereum/client-go:latest
          imagePullPolicy: IfNotPresent
          command:
            - geth
            - --http
            - --http.addr
            - 0.0.0.0
            - --allow-insecure-unlock
            - --http.api
            - eth,net,personal,web3
            - --http.vhosts
            - '*'
            - --ws
            - --ws.addr
            - 0.0.0.0
            - --ws.api
            - eth,net,personal,web3
            - --unlock=62cab2b3b55f341f10348720ca18063cdb779ad5
            - --password=/dev/null
            - --mine
            - --lightkdf
            - --syncmode=full
            - --cache=512
          ports:
            - name: rpc
              containerPort: 8545
              protocol: TCP
            - name: ws
              containerPort: 8546
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: rpc
            initialDelaySeconds: 5
          resources:
            seccompProfile:
              type: RuntimeDefault
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                "": NET_RAW
            readOnlyRootFilesystem: true
          volumeMounts:
            - name: geth-config
              mountPath: /etc/config
            - name: data
              mountPath: /root/.ethereum
      volumes:
        - name: geth-config
          configMap:
            name: release-name-geth-swap-config
        - name: data
          emptyDir: {}
---
apiVersion: batch/v1
kind: Job
metadata:
  name: release-name-geth-swap-setupcontracts
  labels:
    helm.sh/chart: geth-swap-0.3.5
    app.kubernetes.io/name: geth-swap
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/managed-by: Helm
spec:
  template:
    spec:
      containers:
        - name: setup
          image: ethersphere/setup-contracts:latest
          imagePullPolicy: Always
          env:
            - name: BACKEND
              value: http://release-name-geth-swap:8545
            - name: BZZACCOUNTS
              value: cD604B06F0A015269b34c2a8DC8C779535c24B2f c029885FCeedD27623f3293cD892460B528e33E2 DCD36E29Ed55a66F6A3dB114dFcDe7ef1Fb4b346 894A9BfAf6dFe917F0F61bbDcC3096Cd5eA77F2A 666f30fD950Cc8A8Db93f9C7d86Bb0B14cb1773A CD51767481E08aa21eF38Ff346726b61521A3D37
            - name: GAS
              value: "2000000"
          command:
            - sh
            - -ac
            - |
              set -x; while ! curl -m 1 $BACKEND; do sleep 1; done; echo connected to geth >&2; sleep 2; bash deploy.sh
      restartPolicy: Never
---
apiVersion: v1
kind: Pod
metadata:
  name: release-name-geth-swap-test-connection
  labels:
    helm.sh/chart: geth-swap-0.3.5
    app.kubernetes.io/name: geth-swap
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/managed-by: Helm
  annotations:
    helm.sh/hook: test-success
spec:
  containers:
    - name: wget
      image: busybox
      command:
        - wget
      args:
        - release-name-geth-swap:8545
  restartPolicy: Never
